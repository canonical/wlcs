project: wlcs

kill-timeout: 50m

backends:
    lxd:
        systems:
            - ubuntu-24.04
            - ubuntu-25.04
            - ubuntu-25.10
            - ubuntu-devel:
                image: ubuntu-daily:devel/amd64
            - fedora-42
            - fedora-43
            - fedora-rawhide:
                image: images:fedora/43
            - alpine-3.20
            - alpine-3.21
            - alpine-edge
            - archlinux-cloud

suites:
    spread/:
        summary: Build wlcs
        environment:
            ARCH: amd64

            ASAN_OPTIONS: halt_on_error=1
            UBSAN_OPTIONS: print_stacktrace=1:halt_on_error=1
            TSAN_OPTIONS: halt_on_error=1

            # build tasks
            CC/clang: clang
            CXX/clang: clang++

            # sbuild tasks
            ARCH/ubuntu_arm64: arm64
            ARCH/ubuntu_armhf: armhf
            DISTRO: ubuntu
            DISTRO/debian_sid: debian
            RELEASE: noble
            RELEASE/ubuntu: noble
            RELEASE/ubuntu_plucky: plucky
            RELEASE/ubuntu_questing: questing
            RELEASE/ubuntu_devel: resolute
            RELEASE/debian_sid: sid
            PROPOSED: false
            PROPOSED/ubuntu_proposed: true

path:
    /spread/wlcs

exclude:
    - .git
